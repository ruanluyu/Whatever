package system;

import ddf.minim.AudioPlayer;
import ddf.minim.Minim;
import processing.core.PApplet;
import processing.core.PImage;

public class ResManager {
	public static Minim minim = null;
	private PApplet parent;
	private AudioPlayer[] aplist = null;
	private int apPos = 0;
	private PImage[] imglist = null;
	private int imgPos = 0;

	public ResManager(PApplet pa) {
		parent = pa;
		if (minim == null)
			minim = new Minim(pa);
		aplist = new AudioPlayer[216];
		imglist = new PImage[512];
	}

	public void loadAll() {
		////// SOUND
		String soundPath = "./res/bgm/gun_00.wav," + "./res/bgm/gun_01.wav," + "./res/bgm/gun_02.wav,";
		/////////////////// IMG
		// MATERIAL
		String imgPath = "./res/map/bullet/Material_00.png,"
				+ "./res/map/bullet/Material_01.png,"
				+ "./res/map/bullet/Material_02.png,"
				+ "./res/map/bullet/Material_03.png,"
				+ "./res/map/bullet/Material_03_t.png,";
		// BULLET
		imgPath += "./res/obj/bullet/bullet_00.png," + "./res/obj/bullet/bullet_01.png,";
		// BODY
		imgPath += "./res/obj/mainChar/body/body_00.png," + "./res/obj/mainChar/body/body_01.png,"
				+ "./res/obj/mainChar/body/body_02.png," + "./res/obj/mainChar/body/body_03.png,"
				+ "./res/obj/mainChar/body/body_04.png," + "./res/obj/mainChar/body/body_05.png,";
		// FACE
		imgPath += "./res/obj/mainChar/face/face_00.png," + "./res/obj/mainChar/face/face_01.png,"
				+ "./res/obj/mainChar/face/face_02.png," + "./res/obj/mainChar/face/face_03.png,"
				+ "./res/obj/mainChar/face/face_04.png," + "./res/obj/mainChar/face/face_05.png,";
		// MONSTER
		imgPath += "./res/obj/monster/monster_00.png," + "./res/obj/monster/monster_01.png,";
		// WEAPON
		imgPath += "./res/obj/weapon/weapon_00.png," + "./res/obj/weapon/weapon_01.png,";

		loadAllSound(soundPath);
		loadAllImage(imgPath);
	}

	public void loadAllSound(String str) {
		String[] strlist = str.split(",");
		for (int i = 0; i < strlist.length; i++) {
			loadSound(strlist[i]);
		}
	}

	public void loadAllImage(String str) {
		String[] strlist = str.split(",");
		for (int i = 0; i < strlist.length; i++) {
			loadImage(strlist[i]);
		}
	}

	PImage getImage(int id) {
		return imglist[id];
	}

	AudioPlayer getSound(int id) {
		return aplist[id];
	}

	int getImageLength() {
		return imgPos;
	}

	int getSoundLength() {
		return apPos;
	}

	public void loadImage(String path) {
		imglist[imgPos++] = parent.loadImage(path);
	}

	public void loadSound(String path) {
		aplist[apPos++] = minim.loadFile(path);
	}
	
	public enum imgMaterialId {
		NULL, MATERIAL_00, MATERIAL_01, MATERIAL_02, MATERIAL_03, MATERIAL_03_T,
	}
	
	public enum imgBulletId {
		NULL, BULLET_00, BULLET_01,
	}

	public enum imgBodyId {
		NULL, BODY_00, BODY_01, BODY_02, BODY_03, BODY_04, BODY_05,
	}

	public enum imgFaceId {
		NULL, FACE_00, FACE_01, FACE_02, FACE_03, FACE_04, FACE_05,
	}

	public enum imgMonsterId {
		NULL, MONSTER_00, MONSTER01,
	}

	public enum imgWeaponId {
		NULL, WEAPON00, WEAPON01,
	}

	

	public class ImgIdMessage {
		imgMaterialId materialId = imgMaterialId.NULL;
		imgBulletId bulletId = imgBulletId.NULL;
		imgBodyId bodyId = imgBodyId.NULL;
		imgFaceId faceId = imgFaceId.NULL;
		imgMonsterId monsterId = imgMonsterId.NULL;
		imgWeaponId weaponId = imgWeaponId.NULL;
		int getId() {
			int back = 0;
			if(materialId != imgMaterialId.NULL){
				back += materialId.ordinal()-1;
			}else if(bulletId != imgBulletId.NULL){
				back += imgMaterialId.values().length-1;
				back += bulletId.ordinal()-1;
			}else if(bodyId != imgBodyId.NULL){
				back += imgBulletId.values().length-1;
				back += bodyId.ordinal()-1;
			}else if(faceId != imgFaceId.NULL){
				back += imgBodyId.values().length-1;
				back += bulletId.ordinal()-1;
			}else if(monsterId != imgMonsterId.NULL){
				back += imgFaceId.values().length-1;
				back += bulletId.ordinal()-1;
			}else if(weaponId != imgWeaponId.NULL){
				back += imgMonsterId.values().length-1;
				back += weaponId.ordinal()-1;
			}else back = -1;
			return back;
		}
	}

}
